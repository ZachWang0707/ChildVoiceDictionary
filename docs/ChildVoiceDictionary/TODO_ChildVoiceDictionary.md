# ChildVoiceDictionary 待办事项

## 🔥 高优先级（当前版本）

### 1. 火山引擎 TTS API 权限问题
- **问题**：当前 TTS API 返回 403 错误 - "requested resource not granted"
- **位置**：`api/lib/doubaoTts.ts`
- **说明**：浏览器 SpeechSynthesis 作为兜底可以用，但体验不如火山引擎 TTS
- **建议**：检查火山引擎控制台中豆包语音服务的权限配置

---

## 📋 中优先级（下一个版本）

### 2. 数据库集成
- **需求**：将生词表从 localStorage 迁移到 SQLite / Turso
- **说明**：第一版先用 localStorage，后续迭代

### 3. 交互数据记录
- **需求**：记录完整的用户交互历史（文字内容）
- **说明**：第一版先不做，后续用于产品优化

### 4. 用户账号体系
- **需求**：支持用户登录、账号管理
- **说明**：后续迭代

### 5. 单词复习功能
- **需求**：基于生词表的复习功能
- **说明**：后续迭代

---

## 🐳 Docker 部署优化（后续版本）

### 6. 生产构建优化
- **需求**：先 `npm run build` 前端，然后用 Express 托管静态文件
- **说明**：
  - 当前方案：直接用开发模式运行（Vite dev server）
  - 优化方案：构建生产版本，减少资源占用，提升性能
- **位置**：`Dockerfile`、`server/index.ts`
- **优先级**：中

### 7. Nginx 反向代理
- **需求**：用 Nginx 做反向代理，统一端口（比如都用 80/443）
- **说明**：
  - 当前方案：暴露 5173（前端）和 3001（后端）两个端口
  - 优化方案：Nginx 统一入口，根据路径路由到不同服务
- **位置**：新增 `nginx.conf`、更新 `docker-compose.yml`
- **优先级**：中

### 8. HTTPS 配置
- **需求**：配置 SSL 证书，启用 HTTPS
- **说明**：
  - 方案：使用 Let's Encrypt 免费证书
  - 配合 Nginx 反向代理一起实现
- **位置**：Nginx 配置、Docker Compose 配置
- **优先级**：中

### 9. 日志和监控
- **需求**：配置日志收集和基本监控
- **说明**：
  - 日志：使用 Docker 日志驱动或 ELK Stack
  - 监控：基本的健康检查、资源使用监控
- **位置**：Docker Compose 配置、新增监控服务
- **优先级**：低

### 10. 数据持久化（如需要）
- **需求**：如果后续有数据库，配置数据卷持久化
- **说明**：
  - 当前方案：无状态应用，不需要数据持久化
  - 未来：如果添加数据库，需要配置数据卷
- **位置**：Docker Compose 配置
- **优先级**：低（当前不需要）

---

## ✅ 已完成

- [x] 新方案重写应用
- [x] 意图驱动架构
- [x] 打断机制
- [x] 完整单词释义（读音+词性+含义+举例）
- [x] 三种按钮颜色状态
- [x] 两种按钮交互模式
- [x] 阿里云 ASR Access Token 动态获取和自动刷新
- [x] 最小改动 Docker 部署方案（Dockerfile + docker-compose.yml）
