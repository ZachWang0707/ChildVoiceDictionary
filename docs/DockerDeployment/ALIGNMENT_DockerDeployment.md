# Docker 部署 - 对齐文档

## 原始需求
- 使用工程改动规模最小的办法，把系统用 Docker 部署在轻量服务器上
- 将可选的优化建议，作为后续版本的 TODO 项，放在合适的文档位置

## 边界确认
### 包含内容
- 最小改动的 Docker 部署方案
- 创建必要的 Docker 配置文件
- 更新 TODO 文档，添加后续优化项

### 不包含内容
- 不进行大规模架构重构
- 不修改业务逻辑代码（除了必要的配置调整）
- 不实现生产级别的高可用、负载均衡等高级特性

## 需求理解
### 项目现有架构
- 前端：React + Vite
- 后端：Express 服务器（端口 3001）
- API 路由：ASR、TTS、LLM（通过 Vite 代理）
- 开发模式：使用 `concurrently` 同时启动前后端

### 技术约束
- 保持与现有代码结构兼容
- 最小化代码改动
- 确保在 Docker 容器中能正常运行

## 疑问澄清
- ✅ **是否使用 SDK 动态获取 Token？** 是，已在之前版本实现
- ✅ **Token 管理策略？** 缓存 + 自动刷新
- ✅ **部署架构选择？** 轻量应用服务器 + Docker
- ✅ **改动规模要求？** 工程改动最小

## 最终共识
### 部署方案
- **方案**：最小改动 Docker 部署
- **改动**：仅新增 3 个文件 + 修改 1 个配置文件
- **架构**：开发模式直接打包进 Docker，和本地运行一致

### 文件清单
1. 新增：`Dockerfile` - Docker 镜像构建文件
2. 新增：`.dockerignore` - 忽略不必要的文件
3. 新增：`docker-compose.yml` - 容器编排配置
4. 修改：`vite.config.ts` - 添加 `host: '0.0.0.0'` 配置

### 后续优化 TODO（放到 TODO 文档）
1. 生产构建优化
2. Nginx 反向代理
3. HTTPS 配置
